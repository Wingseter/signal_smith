# 실전 매매 1일차 결과 분석 (2026-02-27)

## 운영 환경

| 항목 | 설정 |
|---|---|
| 계좌 | 키움증권 실전투자 |
| 초기 자본금 | 5,000,002원 |
| AI 모델 | GPT-5.2 (퀀트), Claude Opus 4.6 (펀더멘털), Gemini 2.5 Flash (뉴스) |
| API 경로 | GPT/Claude → CLIProxiAPI (localhost:8317), Gemini → Google 직접 |
| 매매 방식 | AI Council 회의 → 시그널 생성 → 자동/수동 매매 |
| 단일 매매 상한 | 25% |
| 보유 기한 | 최대 10일 |

---

## 1. 계좌 현황 (03/01 기준)

### 요약
| 항목 | 금액 |
|---|---|
| 예수금 | 236,550원 |
| 보유 주식 평가 | 4,099,260원 |
| 미실현 손익 | +73,496원 (+1.83%) |
| 실현 순수익 | +62,946원 (수수료/세금 3,027원 차감) |
| **총 수익** | **약 +136,442원 (+2.7%)** |

### 보유 종목 (9개)

| 종목 | 수량 | 평균단가 | 현재가 | 평가금액 | 손익 | 수익률 | 비중 |
|---|---|---|---|---|---|---|---|
| 두산(000150) | 1 | 1,195,000 | 1,278,000 | 1,278,000 | +80,084 | **+6.70%** | 31.2% |
| LG에너지솔루션(373220) | 2 | 420,000 | 427,000 | 854,000 | +12,052 | +1.43% | 20.8% |
| SK(034730) | 2 | 412,000 | 401,000 | 802,000 | -23,844 | **-2.89%** | 19.6% |
| LIG넥스원(079550) | 1 | 513,000 | 509,000 | 509,000 | -5,157 | -1.01% | 12.4% |
| 삼성전자(005930) | 2 | 210,000 | 216,500 | 433,000 | +12,015 | +2.86% | 10.6% |
| 대한항공(003490) | 3 | 28,350 | 28,100 | 84,300 | -938 | -1.10% | 2.1% |
| 대우건설(047040) | 6 | 10,120 | 10,140 | 60,840 | -1 | +0.00% | 1.5% |
| LG디스플레이(034220) | 4 | 14,430 | 14,340 | 57,360 | -474 | -0.82% | 1.4% |
| 유안타증권(003470) | 4 | 5,240 | 5,190 | 20,760 | -241 | -1.15% | 0.5% |

### 실현 수익 (매도 2건)

| 일자 | 종목 | 수량 | 매입단가 | 체결가 | 손익 | 손익률 |
|---|---|---|---|---|---|---|
| 02/27 | 삼성전자 | 4 | 210,000 | 221,500 | +43,978 | +5.24% |
| 02/27 | 삼성전자 | 2 | 210,000 | 221,500 | +21,995 | +5.24% |

---

## 2. 분석

### 긍정적 요소

1. **첫날부터 플러스 수익** — 미실현+실현 합계 +2.7%는 우수한 출발
2. **삼성전자 익절 판단** — +5.24%에서 6주 매도, 수수료 제하고 +62,946원 확보. AI의 목표가 도달 판단이 적절했음
3. **과잉매매 없음** — 매도 2건으로 절제된 매매. 수수료 부담 최소화
4. **두산 +6.70%** — 포트폴리오 수익의 핵심 기여. AI가 해당 종목을 선별한 것은 유효

### 문제점

#### 문제 1: 소액 포지션 (심각)
- 유안타증권 20,760원 (비중 0.5%), LG디스플레이 57,360원 (1.4%), 대우건설 60,840원 (1.5%), 대한항공 84,300원 (2.1%)
- 4개 종목 합계 223,260원 (전체의 5.4%)
- **+10% 수익이 나도 22,326원** — 수수료 대비 의미 없는 포지션
- 원인: 앞에서 큰 종목(두산 120만, SK 82만 등)을 사고 나면 남은 돈으로 작은 것만 살 수 있음

#### 문제 2: 현금 고갈
- 예수금 236,550원 (전체의 약 5%)
- 좋은 기회가 와도 추가 매수 불가
- 긴급 상황에서 포트폴리오 조정 여력 없음

#### 문제 3: 두산 비중 과대
- 단일 종목 비중 31.2% — 25% 상한 설정했으나 **주가 상승으로 비중 증가**
- 매수 시점에는 25% 이내였으나 +6.7% 상승 후 비중 초과

#### 문제 4: Gemini 뉴스 분석 장애
- CLIProxiAPI 경유 시 Gemini rate limit 429 에러 다수 발생
- 일부 뉴스가 분석 실패 상태에서 매매 판단이 이루어졌을 가능성
- → Google 직접 연결로 전환하여 해결 (02/27)

#### 문제 5: 키움 API Rate Limit
- 시세 조회(stkinfo) 연속 요청 시 429 에러 빈번
- 모니터링 태스크에서 20+개 종목을 딜레이 없이 조회
- → 요청 간 딜레이 추가 필요

---

## 3. 개선 아이디어

### 아이디어 1: 최대 보유 종목 수 제한

**현재**: 제한 없음 → 9종목까지 늘어남
**제안**: 총자산 규모별 최대 종목 수

| 총자산 | 최대 종목 수 | 종목당 평균 |
|---|---|---|
| ~500만원 | 5개 | ~100만원 |
| ~1,000만원 | 7개 | ~140만원 |
| ~3,000만원 | 10개 | ~300만원 |

**효과**: 각 포지션이 의미있는 크기 유지

### 아이디어 2: 최소 투자금액

**현재**: 제한 없음 → 2만원짜리 포지션 생성
**제안**: 포지션당 최소 총자산의 8% (500만원 기준 약 40만원)

**규칙**:
- 매수 시그널 금액 < 최소 투자금액 → 시그널 폐기
- 예수금 < 최소 투자금액 → 신규 매수 차단

### 아이디어 3: 현금 보유 비율 (Cash Reserve)

**현재**: 제한 없음 → 예수금 5%까지 고갈
**제안**: 항상 총자산의 15%는 현금 유지

**규칙**:
- 매수 후 현금 비중 < 15% 예상 → 매수 차단
- 효과: 좋은 기회 포착 여력 + 긴급 대응 능력 확보

### 아이디어 4: 포트폴리오 교체 (리밸런싱)

**현재**: 현금 부족 → 신규 매수 불가
**제안**: 기존 보유 중 가장 약한 종목을 매도 → 새 종목으로 교체

**교체 조건**:
1. 보유 종목 수가 최대치
2. 신규 시그널의 AI 신뢰도 > 기존 보유 종목 중 최하위
3. 기존 약한 종목의 수익률이 일정 기준 미만

**약한 종목 판단 기준**:
- AI Council 점수 최하위
- 현재 수익률 최하위
- 보유 기간 대비 성과 부진

### 종합: 권장 규칙 조합

```
[규칙 1] 최대 보유 종목: 5개 (500만원 기준)
[규칙 2] 최소 포지션 크기: 총자산의 8%
[규칙 3] 현금 보유 비율: 15% 유지
[규칙 4] 종목 수 꽉 참 + 좋은 시그널 → 약한 종목 교체
[규칙 5] 단일 종목 비중 상한: 25% (기존 유지)
```

**시뮬레이션** (500만원 기준):
```
매수 가능 금액 = 500만 × 85% = 425만원
최대 5종목 × 평균 85만원

종목A 100만 (20%) ← 현금 400만
종목B 100만 (20%) ← 현금 300만
종목C 100만 (20%) ← 현금 200만
종목D  85만 (17%) ← 현금 115만
종목E  40만 (8%)  ← 현금 75만 (15%) → 매수 중단

→ 더 좋은 시그널 → 종목E(최약) 매도 → 새 종목 매수
```

---

## 4. 구현 우선순위

| 순위 | 항목 | 난이도 | 영향도 |
|---|---|---|---|
| 1 | 최대 보유 종목 수 제한 | 낮음 | 높음 |
| 2 | 현금 보유 비율 15% | 낮음 | 높음 |
| 3 | 최소 포지션 크기 8% | 낮음 | 중간 |
| 4 | 키움 API 요청 딜레이 | 낮음 | 중간 |
| 5 | 포트폴리오 교체 로직 | 높음 | 높음 |

---

## 5. 다음 단계

- [ ] 규칙 1~3 구현 (orchestrator.py 수정)
- [ ] 키움 API 요청 간 딜레이 추가 (rest_client.py)
- [ ] 포트폴리오 교체 로직 설계 및 구현
- [ ] 2일차 이후 결과 대비 개선 효과 측정
- [ ] 보유 종목 수 대비 수익률 상관관계 분석
